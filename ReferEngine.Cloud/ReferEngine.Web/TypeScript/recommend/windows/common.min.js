define(["require","exports"],function(n,t){var r="ms-appx://apexa.co.calculi/Blu.html",u=ReferEngineGlobals.baseUrl,f=function(){function n(n){this.action=n,this.text=null}return n}(),e,o,s,h,i,c;t.ActionMessage=f,e=function(){function n(n,t){this.action=n,this.text=t}return n}(),o=function(){function n(){}return n.getFriends=u+"/recommend/win8/getfriends",n.postRecommendation=u+"/recommend/win8/postrecommendation",n}(),t.Url=o,s=function(){function n(){}return n.hideLoading=function(){n.postAction("hide-loading")},n.showLoading=function(t){n.postAction("show-loading"),t&&n.postToClient(new e("set-loading-text",t))},n.postAction=function(t){n.postToClient(new f(t))},n.postToClient=function(n){var t={action:n.action,text:n.text},i=JSON.stringify(t);window.parent.postMessage(i,r)},n.postRecommendCancel=function(n){var t={action:"cancel",dontAskAgain:n},i=JSON.stringify(t);window.parent.postMessage(i,r)},n}(),t.ClientMessaging=s,h=function(){function n(){}return n.getDateTime=function(n){var t=n.getFullYear(),i=n.getMonth()+1,r=n.getDate(),u=n.getHours(),f=n.getMinutes(),e=n.getSeconds();return t+"-"+i+"-"+r+"T"+u+":"+f+":"+e},n.getDay=function(n){var t=n.getDay();switch(t){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat"}},n.track=function(t,i){var u=new Date,f={AppName:ReferEngineGlobals.appName,AppId:ReferEngineGlobals.appId,Timestamp:n.getDateTime(u),Day:n.getDay(u)},r;if(i)for(r in i)i.hasOwnProperty(r)&&(f[r]=i[r]);mixpanel.track(t,f)},n}(),t.MixPanel=h,i=[],c=function(n,t){i.push({msg:n,handler:t})},window.addEventListener("message",function(n){for(var r=JSON.parse(n.data),t=0;t<i.length;t++)i[t].msg===r.msg&&i[t].handler(r)})})