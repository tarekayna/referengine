define(["require","exports","../../common/notifications"],function(n,t,i){var r=i,u,f,e=function(){function n(){}return n.initPage=function(){var n,t;s.init(),n=$("#open-win8-store"),n.length>0&&(t=n.first().attr("data-store-link"),n.click(function(n){n.stopPropagation(),$("#open-store-frame").attr("src",t)})),$(".popover-button").popover({})},n}(),o=function(){function n(){this.Recommenders=u.observableArray(),this.RecommendersLoaded=u.observable(!1)}return n}(),s=function(){function n(){}return n.isInitialized=!1,n.init=function(){n.isInitialized||(n.viewModel=new o,u.applyBindings(n.viewModel),n.isInitialized=!0),n.refresh()},n.onDataRequestSuccess=function(t){n.isInitialized||n.init(),n.viewModel.Recommenders.removeAll();for(var i=0;i<t.length;i++)n.viewModel.Recommenders.push(t[i]);r.show("Success: recommendations updated",r.NotificationType.success),n.viewModel.RecommendersLoaded(!0)},n.onDataRequestError=function(){r.show("Error: could not update recommendations",r.NotificationType.error)},n.refresh=function(){re.appId!=-1?($.ajax("../a/GetAppRecommendations",{type:"POST",data:{appId:re.appId,page:1},dataType:"json",error:n.onDataRequestError,success:n.onDataRequestSuccess}),r.show("Updating recommendations...",r.NotificationType.info)):n.viewModel.RecommendersLoaded(!0)},n}();n(["../../lib/knockout","../../lib/date","../../lib/daterangepicker"],function(n){u=n,f=Date,$(document).ready(e.initPage)})})